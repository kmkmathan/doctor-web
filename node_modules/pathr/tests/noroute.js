'use strict';

var assert = require('chai').assert;

var pathr = require('../index.js'),
	pathr = new pathr;

pathr.config('views', __dirname);
pathr.config('view_engine', require('jade').__express);

describe('pathr', function(){

	var req = {
		url: '/futuraio',
		method: 'GET',
		body: {
			names:'Your mom'
		},
	};

	var res = {
		write: function(){},
		writeHead: function(){},
	};

	var cb = function(req, res, done) {
		res.locals = req.body;
		done();
	};

	describe('pathr#get()', function(){
		it('registers a get', function(){
			pathr.get('/foo/bar', cb, {
				view: 'view'
			});
			assert.ok(1);
		});
	});

	describe('pathr#route()', function(){
		it('routes a path', function(d){
			res.end = function(data){
				assert.ok(data);
				assert.equal(data, 'cannot GET /futuraio');
				d();
			};
			pathr.route(req, res);
		});
	});
});
